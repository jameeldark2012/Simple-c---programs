#include <iostream.h>
#include <iomanip.h>
struct node
{
int data ;
node *before , *after ;
};
typedef node *ptr;
ptr head , last , cura, curb;

void create_CD()
{
 cout<<"Enter the list number ... "<<endl;
 head=new node ();
cin>> head->data;
 cura=head;
 curb=head;
 for(int i=1;i<=4;i++)              //creates a CD linked list of 5 elements while accepting input from user ;
     {
      cura->after=new node();
      curb=cura;
      cura=cura->after;
      cin>> cura->data;
      cura->before=curb;
     }
 last = cura;
 last->after=head;
 head->before=last;

}

void sort_CD()
{
cura=head;
curb=head->after;
 ptr temp = new node ();
 while (cura->after!=head)
    {
     while (curb!=head)
            {
             if(curb->data < cura->data)
                {                                                    //sorts list's elements in an assending order ;
                 temp->data = cura->data;
                 cura->data=curb->data;
                 curb->data=temp->data;
                 curb=curb->after;
                }
             else
                curb=curb->after;

            }
     cura=cura->after;
     curb=cura->after;
    }

}

int print_CD()
{
   if(head==NULL||last==NULL)
      return 0;


 else
 {
 cout<<head->data<< " ";
 cura=head;
 while (cura->after!=head)
       {                                //prints the CD list ;
        cura=cura->after;
        cout<<cura->data << " ";
       }
  }
cout<<endl;

}

delfirst_CD()
{
 if(head==last)
{
 delete head ;    //If the list has one element it assigns pointers to-> NULL manually
 head=NULL;
 last=NULL;
}
 else
 {
 head=head->after;
 cura=head->before;
 head->before=cura->before;
 last->after=head;
 delete cura ;
 }

}

dellast_CD()
{
if(last==head)
{
 delete last ;    //If the list has one element it assigns pointers to-> NULL manually
 last=NULL;
 head=NULL;
}
 else
  {
 cura=last;
 last=last->before;
 last->after=cura->after;
 head->before=cura->before;
 delete cura;
  }
}

del_odd_CD()
{


 cura=head->after;
 curb=cura;
 ptr ptr;
 while(cura!=last)
      {
       if(cura->data%2!=0)
          {
           ptr=cura->before;
           curb=cura->after;
           ptr->after=curb;                         //checks data for any element if odd it deletes it
           curb->before=ptr;
           delete cura;
           cura=curb;;
          }
       else
          {
           cura=cura->after;
          }
      }

if(head->data%2!=0)
          delfirst_CD();   //checks data for head if odd it deletes   it

}
main()
{
 create_CD();
 cout<< "data is : "<<setw(19); print_CD(); cout<<endl;
 sort_CD();
 cout<< "data after sorting is : "<<setw(5);print_CD(); cout<<endl;
 del_odd_CD();
 if(last->data%2!=0)  //checks data for last if odd it deletes it
     dellast_CD();
 cout<<"data after odd deletion is: "; print_CD();
 cout<<endl;
 int q;
 cin>>q;
}